<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡¨åºŠå®Ÿç¿’AIè©•ä¾¡ OpenAI API ã‚³ã‚¹ãƒˆè©¦ç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Yu Gothic', 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .header p {
            font-size: 14px;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .section {
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #667eea;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .section-title::before {
            content: 'â–¶';
            margin-right: 10px;
            font-size: 14px;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-size: 13px;
            font-weight: 600;
            color: #495057;
            margin-bottom: 6px;
        }

        .input-group input,
        .input-group select,
        .input-group textarea {
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
            font-family: 'Segoe UI', 'Yu Gothic', 'Hiragino Sans', sans-serif;
        }

        .input-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .token-display {
            font-size: 12px;
            color: #6c757d;
            margin-top: 4px;
            font-weight: 600;
        }

        .model-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .model-table th {
            background: #667eea;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
        }

        .model-table td {
            padding: 12px;
            border-bottom: 1px solid #dee2e6;
            font-size: 13px;
        }

        .model-table tr:last-child td {
            border-bottom: none;
        }

        .model-table tr:hover {
            background: #f8f9fa;
        }

        .calc-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            margin: 20px auto;
            display: block;
        }

        .calc-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
        }

        .calc-button:active {
            transform: translateY(0);
        }

        .download-button {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
            margin: 10px auto;
            display: block;
        }

        .download-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.6);
        }

        .result-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 20px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .result-title {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .result-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .result-item-label {
            font-size: 12px;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .result-item-value {
            font-size: 24px;
            font-weight: 700;
        }

        .breakdown-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            color: #333;
            border-radius: 10px;
            overflow: hidden;
        }

        .breakdown-table th {
            background: #764ba2;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            font-size: 13px;
        }

        .breakdown-table td {
            padding: 12px;
            border-bottom: 1px solid #dee2e6;
            font-size: 13px;
        }

        .breakdown-table tr:last-child td {
            border-bottom: none;
            font-weight: 700;
            background: #f8f9fa;
        }

        .breakdown-table tr.total-row {
            background: #764ba2 !important;
            color: white !important;
            font-weight: 700;
        }

        .breakdown-table tr.total-row td {
            background: #764ba2 !important;
            color: white !important;
            border-bottom: none;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            border-radius: 8px;
            font-size: 13px;
            color: #0c5460;
            margin-top: 15px;
        }

        .calculation-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            border-radius: 8px;
            font-size: 13px;
            color: #856404;
            margin-top: 15px;
        }

        .practice-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border: 2px solid #dee2e6;
        }

        .practice-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .prompt-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
            border: 2px solid #667eea;
        }

        .prompt-section h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 18px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ è‡¨åºŠå®Ÿç¿’AIè©•ä¾¡ OpenAI API ã‚³ã‚¹ãƒˆè©¦ç®—ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h1>
            <p>æŸ”é“æ•´å¾©å¸«é¤Šæˆèª²ç¨‹ ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆè‡ªå‹•è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ  äºˆç®—ç­–å®šãƒ„ãƒ¼ãƒ« ver 4.0</p>
        </div>

        <div class="content">
            <!-- åŸºæœ¬è¨­å®š -->
            <div class="section">
                <div class="section-title">ğŸ“Š åŸºæœ¬è¨­å®š</div>
                <div class="input-grid">
                    <div class="input-group">
                        <label>ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«</label>
                        <select id="model" onchange="calculate()">
                            <option value="gpt-5.2">gpt-5.2</option>
                            <option value="gpt-5-mini" selected>gpt-5-mini</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆï¼ˆå††/ãƒ‰ãƒ«ï¼‰</label>
                        <input type="number" id="exchangeRate" value="155" min="100" max="200" step="0.1">
                    </div>
                </div>

                <table class="model-table">
                    <thead>
                        <tr>
                            <th>ãƒ¢ãƒ‡ãƒ«</th>
                            <th>å…¥åŠ›å˜ä¾¡<br>($/1M tokens)</th>
                            <th>å‡ºåŠ›å˜ä¾¡<br>($/1M tokens)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>gpt-5.2</strong></td>
                            <td>$1.75</td>
                            <td>$14.00</td>
                        </tr>
                        <tr>
                            <td><strong>gpt-5-mini</strong></td>
                            <td>$0.25</td>
                            <td>$2.00</td>
                        </tr>
                    </tbody>
                </table>

                <div class="calculation-box">
                    <strong>ğŸ’¡ ã‚³ã‚¹ãƒˆè¨ˆç®—å¼:</strong><br>
                    <code>ç·ã‚³ã‚¹ãƒˆ = Î£(å„å®Ÿç¿’ã®è©•ä¾¡ä»¶æ•° Ã— (å…¥åŠ›tokens Ã— å…¥åŠ›å˜ä¾¡ + å‡ºåŠ›tokens Ã— å‡ºåŠ›å˜ä¾¡) / 1,000,000)</code><br><br>
                    <strong>å„å®Ÿç¿’ã®è©•ä¾¡ä»¶æ•° =</strong> å±¥ä¿®è€…æ•° Ã— å®Ÿç¿’æ—¥æ•° Ã— 1æ—¥ã‚ãŸã‚Šæå‡ºå›æ•°<br>
                    <strong>å…¥åŠ›tokens =</strong> (ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ–‡å­—æ•° + ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯æ–‡å­—æ•° + ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆæ–‡å­—æ•°) Ã— 0.7<br>
                    <strong>å‡ºåŠ›tokens =</strong> AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ–‡å­—æ•° Ã— 0.7<br>
                    <strong>ãƒˆãƒ¼ã‚¯ãƒ³æ›ç®—ä¿‚æ•°:</strong> æ—¥æœ¬èª1æ–‡å­— â‰ˆ 0.7 tokens
                </div>
            </div>

            <!-- è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ å…±é€šè¨­å®š -->
            <div class="section">
                <div class="section-title">âš™ï¸ è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ å…±é€šè¨­å®š</div>

                <div class="input-grid">
                    <div class="input-group">
                        <label>Prompt Caching åˆ©ç”¨ç‡ï¼ˆ%ï¼‰</label>
                        <input type="number" id="cacheRate" value="0" min="0" max="100" step="5">
                        <div class="token-display">â€»å…±é€šãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆç‡ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0%ï¼‰</div>
                    </div>
                </div>

                <div class="prompt-section">
                    <h3>ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ</h3>
                    <div class="input-group">
                        <label>ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ¬æ–‡</label>
                        <textarea id="systemPromptText" oninput="updateTokenDisplay()"
                            placeholder="ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="systemPromptTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                </div>

                <div class="prompt-section">
                    <h3>è©•ä¾¡åŸºæº–ãƒ»ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯</h3>
                    <div class="input-group">
                        <label>è©•ä¾¡åŸºæº–ãƒ»ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯æœ¬æ–‡</label>
                        <textarea id="rubricText" oninput="updateTokenDisplay()"
                            placeholder="è©•ä¾¡åŸºæº–ãƒ»ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="rubricTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                </div>
            </div>

            <!-- è‡¨åºŠå®Ÿç¿’â…  -->
            <div class="section">
                <div class="section-title">ğŸ“ è‡¨åºŠå®Ÿç¿’â… ï¼ˆè¦‹å­¦å‹ãƒ»å°å…¥ï¼‰</div>
                <div class="practice-section">
                    <h3>å®Ÿç¿’è¨­å®š</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>å±¥ä¿®è€…æ•°ï¼ˆåï¼‰</label>
                            <input type="number" id="p1_students" value="100" min="0" max="500"
                                oninput="updateTokenDisplay()">
                        </div>
                        <div class="input-group">
                            <label>å®Ÿç¿’æ—¥æ•°</label>
                            <input type="number" id="p1_days" value="5" min="0" max="100"
                                oninput="updateTokenDisplay()">
                        </div>
                        <div class="input-group">
                            <label>1æ—¥ã‚ãŸã‚Šæå‡ºå›æ•°</label>
                            <input type="number" id="p1_submissions" value="1" min="0" max="10"
                                oninput="updateTokenDisplay()">
                        </div>
                    </div>
                </div>

                <div class="practice-section">
                    <h3>å…¥åŠ›è¨­å®šï¼ˆå­¦ç”Ÿãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆï¼‰</h3>
                    <div class="input-group">
                        <label>ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã‚µãƒ³ãƒ—ãƒ«æœ¬æ–‡ï¼ˆå¹³å‡çš„ãªå†…å®¹ã‚’å…¥åŠ›ï¼‰</label>
                        <textarea id="p1_inputText" oninput="updateTokenDisplay()"
                            placeholder="å­¦ç”ŸãŒæå‡ºã™ã‚‹å¹³å‡çš„ãªãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã®å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="p1_inputTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                </div>

                <div class="practice-section">
                    <h3>å‡ºåŠ›è¨­å®šï¼ˆAIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰</h3>
                    <div class="input-group">
                        <label>AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚µãƒ³ãƒ—ãƒ«æœ¬æ–‡ï¼ˆå¹³å‡çš„ãªå‡ºåŠ›ã‚’å…¥åŠ›ï¼‰</label>
                        <textarea id="p1_outputText" oninput="updateTokenDisplay()"
                            placeholder="AIãŒå‡ºåŠ›ã™ã‚‹å¹³å‡çš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="p1_outputTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>ç·è©•ä¾¡ä»¶æ•°:</strong> <span id="p1_totalEvals">0</span> ä»¶
                </div>
            </div>

            <!-- è‡¨åºŠå®Ÿç¿’â…¡ -->
            <div class="section">
                <div class="section-title">ğŸ“ è‡¨åºŠå®Ÿç¿’â…¡ï¼ˆå‚åŠ å‹ãƒ»åŸºç¤ï¼‰</div>
                <div class="practice-section">
                    <h3>å®Ÿç¿’è¨­å®š</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>å±¥ä¿®è€…æ•°ï¼ˆåï¼‰</label>
                            <input type="number" id="p2_students" value="100" min="0" max="500"
                                oninput="updateTokenDisplay()">
                        </div>
                        <div class="input-group">
                            <label>å®Ÿç¿’æ—¥æ•°</label>
                            <input type="number" id="p2_days" value="15" min="0" max="100"
                                oninput="updateTokenDisplay()">
                        </div>
                        <div class="input-group">
                            <label>1æ—¥ã‚ãŸã‚Šæå‡ºå›æ•°</label>
                            <input type="number" id="p2_submissions" value="1" min="0" max="10"
                                oninput="updateTokenDisplay()">
                        </div>
                    </div>
                </div>

                <div class="practice-section">
                    <h3>å…¥åŠ›è¨­å®šï¼ˆå­¦ç”Ÿãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆï¼‰</h3>
                    <div class="input-group">
                        <label>ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã‚µãƒ³ãƒ—ãƒ«æœ¬æ–‡ï¼ˆå¹³å‡çš„ãªå†…å®¹ã‚’å…¥åŠ›ï¼‰</label>
                        <textarea id="p2_inputText" oninput="updateTokenDisplay()"
                            placeholder="å­¦ç”ŸãŒæå‡ºã™ã‚‹å¹³å‡çš„ãªãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã®å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="p2_inputTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                </div>

                <div class="practice-section">
                    <h3>å‡ºåŠ›è¨­å®šï¼ˆAIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰</h3>
                    <div class="input-group">
                        <label>AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚µãƒ³ãƒ—ãƒ«æœ¬æ–‡ï¼ˆå¹³å‡çš„ãªå‡ºåŠ›ã‚’å…¥åŠ›ï¼‰</label>
                        <textarea id="p2_outputText" oninput="updateTokenDisplay()"
                            placeholder="AIãŒå‡ºåŠ›ã™ã‚‹å¹³å‡çš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="p2_outputTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>ç·è©•ä¾¡ä»¶æ•°:</strong> <span id="p2_totalEvals">0</span> ä»¶
                </div>
            </div>

            <!-- è‡¨åºŠå®Ÿç¿’â…¢ -->
            <div class="section">
                <div class="section-title">ğŸ“ è‡¨åºŠå®Ÿç¿’â…¢ï¼ˆå‚åŠ å‹ãƒ»å¿œç”¨ï¼‰</div>
                <div class="practice-section">
                    <h3>å®Ÿç¿’è¨­å®š</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>å±¥ä¿®è€…æ•°ï¼ˆåï¼‰</label>
                            <input type="number" id="p3_students" value="100" min="0" max="500"
                                oninput="updateTokenDisplay()">
                        </div>
                        <div class="input-group">
                            <label>å®Ÿç¿’æ—¥æ•°</label>
                            <input type="number" id="p3_days" value="15" min="0" max="100"
                                oninput="updateTokenDisplay()">
                        </div>
                        <div class="input-group">
                            <label>1æ—¥ã‚ãŸã‚Šæå‡ºå›æ•°</label>
                            <input type="number" id="p3_submissions" value="1" min="0" max="10"
                                oninput="updateTokenDisplay()">
                        </div>
                    </div>
                </div>

                <div class="practice-section">
                    <h3>å…¥åŠ›è¨­å®šï¼ˆå­¦ç”Ÿãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆï¼‰</h3>
                    <div class="input-group">
                        <label>ãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã‚µãƒ³ãƒ—ãƒ«æœ¬æ–‡ï¼ˆå¹³å‡çš„ãªå†…å®¹ã‚’å…¥åŠ›ï¼‰</label>
                        <textarea id="p3_inputText" oninput="updateTokenDisplay()"
                            placeholder="å­¦ç”ŸãŒæå‡ºã™ã‚‹å¹³å‡çš„ãªãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆã®å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="p3_inputTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                </div>

                <div class="practice-section">
                    <h3>å‡ºåŠ›è¨­å®šï¼ˆAIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰</h3>
                    <div class="input-group">
                        <label>AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚µãƒ³ãƒ—ãƒ«æœ¬æ–‡ï¼ˆå¹³å‡çš„ãªå‡ºåŠ›ã‚’å…¥åŠ›ï¼‰</label>
                        <textarea id="p3_outputText" oninput="updateTokenDisplay()"
                            placeholder="AIãŒå‡ºåŠ›ã™ã‚‹å¹³å‡çš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="p3_outputTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>ç·è©•ä¾¡ä»¶æ•°:</strong> <span id="p3_totalEvals">0</span> ä»¶
                </div>
            </div>

            <!-- è‡¨åœ°å®Ÿç¿’ -->
            <div class="section">
                <div class="section-title">ğŸ“ è‡¨åœ°å®Ÿç¿’ï¼ˆâ…£ï¼‰ï¼ˆå¤šè·ç¨®é€£æºï¼‰</div>
                <div class="practice-section">
                    <h3>å®Ÿç¿’è¨­å®š</h3>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>å±¥ä¿®è€…æ•°ï¼ˆåï¼‰</label>
                            <input type="number" id="p4_students" value="100" min="0" max="500"
                                oninput="updateTokenDisplay()">
                        </div>
                        <div class="input-group">
                            <label>å®Ÿç¿’æ—¥æ•°</label>
                            <input type="number" id="p4_days" value="5" min="0" max="100"
                                oninput="updateTokenDisplay()">
                        </div>
                        <div class="input-group">
                            <label>1æ—¥ã‚ãŸã‚Šæå‡ºå›æ•°</label>
                            <input type="number" id="p4_submissions" value="1" min="0" max="10"
                                oninput="updateTokenDisplay()">
                        </div>
                    </div>
                </div>

                <div class="practice-section">
                    <h3>å…¥åŠ›è¨­å®šï¼ˆæ´»å‹•å ±å‘Šæ›¸ãƒ»å®Ÿç¿’ç·æ‹¬ãƒ¬ãƒãƒ¼ãƒˆï¼‰</h3>
                    <div class="input-group">
                        <label>æ´»å‹•å ±å‘Šæ›¸æœ¬æ–‡</label>
                        <textarea id="p4_reportText" oninput="updateTokenDisplay()"
                            placeholder="å­¦ç”ŸãŒæå‡ºã™ã‚‹æ´»å‹•å ±å‘Šæ›¸ã®å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="p4_reportTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                    <div class="input-group" style="margin-top: 15px;">
                        <label>å®Ÿç¿’ç·æ‹¬ãƒ¬ãƒãƒ¼ãƒˆæœ¬æ–‡</label>
                        <textarea id="p4_summaryText" oninput="updateTokenDisplay()"
                            placeholder="å­¦ç”ŸãŒæå‡ºã™ã‚‹å®Ÿç¿’ç·æ‹¬ãƒ¬ãƒãƒ¼ãƒˆã®å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="p4_summaryTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                </div>

                <div class="practice-section">
                    <h3>å‡ºåŠ›è¨­å®šï¼ˆAIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰</h3>
                    <div class="input-group">
                        <label>AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚µãƒ³ãƒ—ãƒ«æœ¬æ–‡ï¼ˆå¹³å‡çš„ãªå‡ºåŠ›ã‚’å…¥åŠ›ï¼‰</label>
                        <textarea id="p4_outputText" oninput="updateTokenDisplay()"
                            placeholder="AIãŒå‡ºåŠ›ã™ã‚‹å¹³å‡çš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>
                        <div class="token-display" id="p4_outputTokens">ç´„ 0 tokensï¼ˆæ–‡å­—æ•°: 0ï¼‰</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>ç·è©•ä¾¡ä»¶æ•°:</strong> <span id="p4_totalEvals">0</span> ä»¶
                </div>
            </div>

            <button class="calc-button" onclick="calculate()">ğŸ’° ã‚³ã‚¹ãƒˆè©¦ç®—ã‚’å®Ÿè¡Œ</button>

            <!-- çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div id="results" style="display: none;">
                <div class="result-card">
                    <div class="result-title">ğŸ“Š å¹´é–“ã‚³ã‚¹ãƒˆè©¦ç®—çµæœ</div>
                    <div class="result-grid">
                        <div class="result-item">
                            <div class="result-item-label">ç·ã‚³ã‚¹ãƒˆï¼ˆUSDï¼‰</div>
                            <div class="result-item-value" id="totalUSD">$0.00</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-label">ç·ã‚³ã‚¹ãƒˆï¼ˆå††ï¼‰</div>
                            <div class="result-item-value" id="totalJPY">Â¥0</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-label">ç·è©•ä¾¡ä»¶æ•°</div>
                            <div class="result-item-value" id="totalEvalsDisplay">0 ä»¶</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-label">è©•ä¾¡1ä»¶ã‚ãŸã‚Šï¼ˆå††ï¼‰</div>
                            <div class="result-item-value" id="perEvaluation">Â¥0.00</div>
                        </div>
                    </div>

                    <table class="breakdown-table" id="breakdownTable">
                        <thead>
                            <tr>
                                <th>ç§‘ç›®</th>
                                <th>å±¥ä¿®è€…æ•°</th>
                                <th>è©•ä¾¡ä»¶æ•°</th>
                                <th>å…¥åŠ›tokens<br>(å¹³å‡/ä»¶)</th>
                                <th>å‡ºåŠ›tokens<br>(å¹³å‡/ä»¶)</th>
                                <th>å…¥åŠ›ã‚³ã‚¹ãƒˆ<br>(USD)</th>
                                <th>å‡ºåŠ›ã‚³ã‚¹ãƒˆ<br>(USD)</th>
                                <th>å°è¨ˆ<br>(USD)</th>
                                <th>å°è¨ˆ<br>(å††)</th>
                            </tr>
                        </thead>
                        <tbody id="breakdownBody">
                        </tbody>
                    </table>
                </div>

                <button class="download-button" onclick="downloadCSV()">ğŸ“¥ çµæœã‚’CSVã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</button>
            </div>
        </div>
    </div>

    <script>
        // ãƒ¢ãƒ‡ãƒ«æ–™é‡‘å®šç¾©ï¼ˆ$/1M tokensï¼‰
        // cacheå˜ä¾¡ã‚’è¿½åŠ 
        const modelPrices = {
            'gpt-5.2': { input: 1.75, params: 'gpt-5.2', cache: 0.175, output: 14.00 },
            'gpt-5-mini': { input: 0.25, params: 'gpt-5-mini', cache: 0.025, output: 2.00 }
        };

        // æ—¥æœ¬èªæ–‡å­—â†’tokenã®æ¦‚ç®—å¤‰æ›ä¿‚æ•°
        const CHAR_TO_TOKEN = 0.7;

        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ï¼ˆCSVå‡ºåŠ›ç”¨ï¼‰
        let calculationResults = null;

        function updateTokenDisplay() {
            // ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
            const systemPromptText = document.getElementById('systemPromptText').value;
            const systemPromptChars = systemPromptText.length;
            const systemPromptTokens = Math.round(systemPromptChars * CHAR_TO_TOKEN);
            document.getElementById('systemPromptTokens').textContent =
                `ç´„ ${systemPromptTokens.toLocaleString()} tokensï¼ˆæ–‡å­—æ•°: ${systemPromptChars.toLocaleString()}ï¼‰`;

            // ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯
            const rubricText = document.getElementById('rubricText').value;
            const rubricChars = rubricText.length;
            const rubricTokens = Math.round(rubricChars * CHAR_TO_TOKEN);
            document.getElementById('rubricTokens').textContent =
                `ç´„ ${rubricTokens.toLocaleString()} tokensï¼ˆæ–‡å­—æ•°: ${rubricChars.toLocaleString()}ï¼‰`;

            // å„å®Ÿç¿’ã®ãƒˆãƒ¼ã‚¯ãƒ³è¡¨ç¤ºã¨è©•ä¾¡ä»¶æ•°
            for (let i = 1; i <= 4; i++) {
                const students = parseInt(document.getElementById(`p${i}_students`).value) || 0;
                const days = parseInt(document.getElementById(`p${i}_days`).value) || 0;
                const submissions = parseInt(document.getElementById(`p${i}_submissions`).value) || 0;
                const outputText = document.getElementById(`p${i}_outputText`).value;
                const outputChars = outputText.length;
                const outputTokens = Math.round(outputChars * CHAR_TO_TOKEN);
                const totalEvals = students * days * submissions;

                if (i === 4) {
                    // è‡¨åºŠå®Ÿç¿’â…£ï¼ˆæ´»å‹•å ±å‘Šæ›¸ + å®Ÿç¿’ç·æ‹¬ãƒ¬ãƒãƒ¼ãƒˆï¼‰
                    const reportText = document.getElementById('p4_reportText').value;
                    const summaryText = document.getElementById('p4_summaryText').value;
                    const reportChars = reportText.length;
                    const summaryChars = summaryText.length;
                    const reportTokens = Math.round(reportChars * CHAR_TO_TOKEN);
                    const summaryTokens = Math.round(summaryChars * CHAR_TO_TOKEN);

                    document.getElementById('p4_reportTokens').textContent =
                        `ç´„ ${reportTokens.toLocaleString()} tokensï¼ˆæ–‡å­—æ•°: ${reportChars.toLocaleString()}ï¼‰`;
                    document.getElementById('p4_summaryTokens').textContent =
                        `ç´„ ${summaryTokens.toLocaleString()} tokensï¼ˆæ–‡å­—æ•°: ${summaryChars.toLocaleString()}ï¼‰`;
                } else {
                    // ãã®ä»–ï¼ˆãƒ‡ã‚¤ãƒªãƒ¼ãƒãƒ¼ãƒˆï¼‰
                    const inputText = document.getElementById(`p${i}_inputText`).value;
                    const inputChars = inputText.length;
                    const inputTokens = Math.round(inputChars * CHAR_TO_TOKEN);

                    document.getElementById(`p${i}_inputTokens`).textContent =
                        `ç´„ ${inputTokens.toLocaleString()} tokensï¼ˆæ–‡å­—æ•°: ${inputChars.toLocaleString()}ï¼‰`;
                }

                document.getElementById(`p${i}_outputTokens`).textContent =
                    `ç´„ ${outputTokens.toLocaleString()} tokensï¼ˆæ–‡å­—æ•°: ${outputChars.toLocaleString()}ï¼‰`;
                document.getElementById(`p${i}_totalEvals`).textContent = totalEvals.toLocaleString();
            }
        }

        function calculate() {
            // å…¥åŠ›å€¤å–å¾—
            const model = document.getElementById('model').value;
            const exchangeRate = parseFloat(document.getElementById('exchangeRate').value);
            const cacheRate = parseFloat(document.getElementById('cacheRate').value) / 100; // % -> rate

            // å…±é€šè¨­å®š
            const systemPromptText = document.getElementById('systemPromptText').value;
            const rubricText = document.getElementById('rubricText').value;
            const systemPromptTokens = Math.round(systemPromptText.length * CHAR_TO_TOKEN);
            const rubricTokens = Math.round(rubricText.length * CHAR_TO_TOKEN);
            const fixedInputTokens = systemPromptTokens + rubricTokens;

            // ãƒ¢ãƒ‡ãƒ«æ–™é‡‘
            const prices = modelPrices[model];

            // å®Ÿç¿’ãƒ‡ãƒ¼ã‚¿
            const practices = [
                { name: 'è‡¨åºŠå®Ÿç¿’â… ï¼ˆè¦‹å­¦å‹ãƒ»å°å…¥ï¼‰', id: 'p1' },
                { name: 'è‡¨åºŠå®Ÿç¿’â…¡ï¼ˆå‚åŠ å‹ãƒ»åŸºç¤ï¼‰', id: 'p2' },
                { name: 'è‡¨åºŠå®Ÿç¿’â…¢ï¼ˆå‚åŠ å‹ãƒ»å¿œç”¨ï¼‰', id: 'p3' },
                { name: 'è‡¨åœ°å®Ÿç¿’ï¼ˆâ…£ï¼‰', id: 'p4' }
            ];

            let totalCost = 0;
            let totalEvaluations = 0;
            const breakdowns = [];

            practices.forEach(practice => {
                const students = parseInt(document.getElementById(`${practice.id}_students`).value) || 0;
                const days = parseInt(document.getElementById(`${practice.id}_days`).value) || 0;
                const submissions = parseInt(document.getElementById(`${practice.id}_submissions`).value) || 0;
                const outputText = document.getElementById(`${practice.id}_outputText`).value;

                // è©•ä¾¡ä»¶æ•°
                const evaluations = students * days * submissions;
                totalEvaluations += evaluations;

                // ãƒˆãƒ¼ã‚¯ãƒ³è¨ˆç®—
                let studentInputTokens = 0;
                let studentInputChars = 0;

                if (practice.id === 'p4') {
                    // è‡¨åºŠå®Ÿç¿’â…£å°‚ç”¨ãƒ­ã‚¸ãƒƒã‚¯
                    const reportText = document.getElementById('p4_reportText').value;
                    const summaryText = document.getElementById('p4_summaryText').value;
                    studentInputChars = reportText.length + summaryText.length;
                    studentInputTokens = Math.round(studentInputChars * CHAR_TO_TOKEN);
                } else {
                    // é€šå¸¸ãƒ­ã‚¸ãƒƒã‚¯
                    const inputText = document.getElementById(`${practice.id}_inputText`).value;
                    studentInputChars = inputText.length;
                    studentInputTokens = Math.round(studentInputChars * CHAR_TO_TOKEN);
                }

                const totalInputTokensPerEval = fixedInputTokens + studentInputTokens;
                const outputTokensPerEval = Math.round(outputText.length * CHAR_TO_TOKEN);

                // ã‚³ã‚¹ãƒˆè¨ˆç®—ï¼ˆ1è©•ä¾¡ã‚ãŸã‚Šï¼‰
                // å›ºå®šéƒ¨åˆ†ï¼ˆã‚·ã‚¹ãƒ†ãƒ +ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯ï¼‰ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‰²å¼•ãé©ç”¨
                // fixedInputTokens ã®ã†ã¡ã€cacheRateåˆ†ã¯ cacheå˜ä¾¡ã€(1-cacheRate)åˆ†ã¯ inputå˜ä¾¡
                const fixedCostAvg = fixedInputTokens * (prices.input * (1 - cacheRate) + prices.cache * cacheRate) / 1000000;

                // å¤‰å‹•éƒ¨åˆ†ï¼ˆå­¦ç”Ÿã”ã¨ã®å…¥åŠ›ï¼‰ã¯å¸¸ã« inputå˜ä¾¡
                const variableCost = studentInputTokens * prices.input / 1000000;

                const inputCostPerEval = fixedCostAvg + variableCost;
                const outputCostPerEval = (outputTokensPerEval * prices.output) / 1000000;

                // ç·ã‚³ã‚¹ãƒˆ
                const totalInputCost = inputCostPerEval * evaluations;
                const totalOutputCost = outputCostPerEval * evaluations;
                const totalPracticeCost = totalInputCost + totalOutputCost;

                totalCost += totalPracticeCost;

                breakdowns.push({
                    name: practice.name,
                    students: students,
                    evaluations: evaluations,
                    inputTokens: totalInputTokensPerEval, // å¹³å‡å…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã¨ã¿ãªã™
                    outputTokens: outputTokensPerEval,
                    inputChars: studentInputChars,
                    outputChars: outputText.length,
                    inputCost: totalInputCost,
                    outputCost: totalOutputCost,
                    totalCost: totalPracticeCost,
                    costJPY: totalPracticeCost * exchangeRate
                });
            });

            // çµæœã‚’ä¿å­˜ï¼ˆCSVå‡ºåŠ›ç”¨ï¼‰
            calculationResults = {
                model: model,
                exchangeRate: exchangeRate,
                cacheRate: cacheRate * 100, // %è¡¨è¨˜ã§ä¿å­˜
                systemPromptTokens: systemPromptTokens,
                systemPromptChars: systemPromptText.length,
                rubricTokens: rubricTokens,
                rubricChars: rubricText.length,
                fixedInputTokens: fixedInputTokens,
                totalEvaluations: totalEvaluations,
                totalCost: totalCost,
                breakdowns: breakdowns,
                prices: prices
            };

            // çµæœè¡¨ç¤º
            document.getElementById('totalUSD').textContent = '$' + totalCost.toFixed(2);
            document.getElementById('totalJPY').textContent = 'Â¥' + Math.round(totalCost * exchangeRate).toLocaleString();
            document.getElementById('totalEvalsDisplay').textContent = totalEvaluations.toLocaleString() + ' ä»¶';
            document.getElementById('perEvaluation').textContent = totalEvaluations > 0 ?
                'Â¥' + (totalCost * exchangeRate / totalEvaluations).toFixed(2) : 'Â¥0.00';

            // å†…è¨³ãƒ†ãƒ¼ãƒ–ãƒ«
            const tbody = document.getElementById('breakdownBody');
            tbody.innerHTML = '';

            breakdowns.forEach(item => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td><strong>${item.name}</strong></td>
                    <td>${item.students.toLocaleString()}</td>
                    <td>${item.evaluations.toLocaleString()}</td>
                    <td>${item.inputTokens.toLocaleString()}</td>
                    <td>${item.outputTokens.toLocaleString()}</td>
                    <td>$${item.inputCost.toFixed(4)}</td>
                    <td>$${item.outputCost.toFixed(4)}</td>
                    <td>$${item.totalCost.toFixed(2)}</td>
                    <td>Â¥${Math.round(item.costJPY).toLocaleString()}</td>
                `;
            });

            // ç·åˆè¨ˆè¡Œ
            const totalRow = tbody.insertRow();
            totalRow.className = 'total-row';
            totalRow.innerHTML = `
                <td><strong>ç·åˆè¨ˆ</strong></td>
                <td>-</td>
                <td><strong>${totalEvaluations.toLocaleString()} ä»¶</strong></td>
                <td colspan="4"></td>
                <td><strong>$${totalCost.toFixed(2)}</strong></td>
                <td><strong>Â¥${Math.round(totalCost * exchangeRate).toLocaleString()}</strong></td>
            `;

            document.getElementById('results').style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function downloadCSV() {
            if (!calculationResults) {
                alert('å…ˆã«ã‚³ã‚¹ãƒˆè©¦ç®—ã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            const r = calculationResults;
            let csv = '\uFEFF'; // BOM for Excel UTF-8

            // ãƒ˜ãƒƒãƒ€ãƒ¼æƒ…å ±
            csv += 'è‡¨åºŠå®Ÿç¿’AIè©•ä¾¡ OpenAI APIã‚³ã‚¹ãƒˆè©¦ç®—çµæœ\n';
            csv += `ä½œæˆæ—¥æ™‚,${new Date().toLocaleString('ja-JP')}\n`;
            csv += '\n';

            // åŸºæœ¬è¨­å®š
            csv += 'ã€åŸºæœ¬è¨­å®šã€‘\n';
            csv += `ä½¿ç”¨ãƒ¢ãƒ‡ãƒ«,${r.model}\n`;
            csv += `å…¥åŠ›å˜ä¾¡ï¼ˆ$/1M tokensï¼‰,${r.prices.input}\n`;
            csv += `å‡ºåŠ›å˜ä¾¡ï¼ˆ$/1M tokensï¼‰,${r.prices.output}\n`;
            csv += `ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆï¼ˆå††/ãƒ‰ãƒ«ï¼‰,${r.exchangeRate}\n`;
            csv += `Prompt Cachingåˆ©ç”¨ç‡ï¼ˆ%ï¼‰,${r.cacheRate}\n`;
            csv += '\n';

            // å…±é€šè¨­å®š
            csv += 'ã€è©•ä¾¡ã‚·ã‚¹ãƒ†ãƒ å…±é€šè¨­å®šã€‘\n';
            csv += `ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ–‡å­—æ•°,${r.systemPromptChars}\n`;
            csv += `ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒˆãƒ¼ã‚¯ãƒ³æ•°,${r.systemPromptTokens}\n`;
            csv += `ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯æ–‡å­—æ•°,${r.rubricChars}\n`;
            csv += `ãƒ«ãƒ¼ãƒ–ãƒªãƒƒã‚¯ãƒˆãƒ¼ã‚¯ãƒ³æ•°,${r.rubricTokens}\n`;
            csv += `å›ºå®šå…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³åˆè¨ˆ,${r.fixedInputTokens}\n`;
            csv += '\n';

            // ç§‘ç›®åˆ¥è©³ç´°
            csv += 'ã€ç§‘ç›®åˆ¥è©³ç´°ã€‘\n';
            csv += 'ç§‘ç›®å,å±¥ä¿®è€…æ•°,è©•ä¾¡ä»¶æ•°,å…¥åŠ›æ–‡å­—æ•°ï¼ˆå¹³å‡/ä»¶ï¼‰,å…¥åŠ›tokensï¼ˆå¹³å‡/ä»¶ï¼‰,å‡ºåŠ›æ–‡å­—æ•°ï¼ˆå¹³å‡/ä»¶ï¼‰,å‡ºåŠ›tokensï¼ˆå¹³å‡/ä»¶ï¼‰,å…¥åŠ›ã‚³ã‚¹ãƒˆï¼ˆUSDï¼‰,å‡ºåŠ›ã‚³ã‚¹ãƒˆï¼ˆUSDï¼‰,å°è¨ˆï¼ˆUSDï¼‰,å°è¨ˆï¼ˆå††ï¼‰\n';

            r.breakdowns.forEach(item => {
                csv += `${item.name},${item.students},${item.evaluations},${item.inputChars},${item.inputTokens},${item.outputChars},${item.outputTokens},`;
                csv += `${item.inputCost.toFixed(4)},${item.outputCost.toFixed(4)},${item.totalCost.toFixed(2)},${Math.round(item.costJPY)}\n`;
            });

            csv += '\n';

            // åˆè¨ˆ
            csv += 'ã€åˆè¨ˆã€‘\n';
            csv += `ç·è©•ä¾¡ä»¶æ•°,${r.totalEvaluations}\n`;
            csv += `ç·åˆè¨ˆï¼ˆUSDï¼‰,${r.totalCost.toFixed(2)}\n`;
            csv += `ç·åˆè¨ˆï¼ˆå††ï¼‰,${Math.round(r.totalCost * r.exchangeRate)}\n`;
            csv += `è©•ä¾¡1ä»¶ã‚ãŸã‚Šï¼ˆå††ï¼‰,${(r.totalCost * r.exchangeRate / r.totalEvaluations).toFixed(2)}\n`;

            // CSV ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
            const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, -5);

            link.setAttribute('href', url);
            link.setAttribute('download', `è‡¨åºŠå®Ÿç¿’AIè©•ä¾¡_ã‚³ã‚¹ãƒˆè©¦ç®—_${timestamp}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–
        window.addEventListener('load', function () {
            updateTokenDisplay();
        });
    </script>
</body>

</html>