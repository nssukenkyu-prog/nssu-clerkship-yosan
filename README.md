# 臨床実習AI評価 OpenAI APIコスト試算シミュレーター

柔道整復師養成課程における臨床実習のデイリーノート自動評価システムのAPI使用料金を試算するツールです。

## 概要

本ツールは、OpenAI APIを使用した臨床実習評価システムの年間コストを詳細に試算することができます。

### 対象科目
- 臨床実習Ⅰ（見学型・導入）
- 臨床実習Ⅱ（参加型・基礎）
- 臨床実習Ⅲ（参加型・応用）
- 臨地実習（Ⅳ）（多職種連携）

## 主な機能

### 1. プロンプト本文からの自動計算
- システムプロンプトとルーブリックを直接入力
- 文字数から自動でトークン数を計算（日本語係数: 0.7）
- リアルタイムでトークン数を表示

### 2. サンプル本文入力
各実習ごとに以下を入力可能：
- デイリーノートのサンプル本文（学生が提出する平均的な内容）
- AIフィードバックのサンプル本文（AIが出力する平均的な内容）

### 3. 柔軟な設定
- 各実習ごとに個別の履修者数設定
- 実習日数、1日あたり提出回数の調整
- Prompt Cachingの利用率設定
- 為替レート変更対応

### 4. 詳細な試算結果
- 科目別のコスト内訳
- 入力・出力トークン数の表示
- 総コスト（USD/円）
- 評価1件あたりのコスト

### 5. CSV出力機能
試算結果を詳細なCSVファイルとしてダウンロード可能：
- 基本設定（モデル、料金等）
- 共通設定（プロンプト文字数、トークン数）
- 科目別詳細（文字数、トークン数、コスト）
- 総合計

## 使用方法

1. **基本設定**
   - 使用するOpenAIモデルを選択（gpt-5.2 / gpt-5-mini）
   - 為替レートを設定

2. **評価システム共通設定**
   - システムプロンプトを入力
   - 評価基準・ルーブリックを入力
   - キャッシュ利用率を設定

3. **各実習の設定**
   - 履修者数、実習日数、提出回数を入力
   - デイリーノートのサンプルを入力
   - AIフィードバックのサンプルを入力

4. **試算実行**
   - 「コスト試算を実行」ボタンをクリック
   - 結果を確認

5. **データ保存**
   - 「結果をCSVでダウンロード」でデータを保存

## 対応モデル

| モデル | 入力単価 | キャッシュ入力 | 出力単価 |
|--------|---------|---------------|---------|
| gpt-5.2 | $1.75/1M tokens | $0.175/1M tokens | $14.00/1M tokens |
| gpt-5-mini | $0.25/1M tokens | $0.025/1M tokens | $2.00/1M tokens |

## トークン計算について

- 日本語文字からトークンへの変換係数: **0.7**
- 例：1,000文字 ≈ 700 tokens

## Prompt Cachingについて

OpenAI APIのPrompt Caching機能を活用することで、評価基準やルーブリックなどの共通プロンプトを2回目以降の評価でキャッシュから読み込み、入力コストを約90%削減できます。

デフォルト設定では80%のキャッシュ利用率を想定しています。

## 技術仕様

- HTML5 + CSS3 + Vanilla JavaScript
- クライアントサイド完結（サーバー不要）
- レスポンシブデザイン対応
- CSV出力機能（Excel対応UTF-8 BOM）

## ライセンス

このプロジェクトは教育目的で作成されています。

## 作成者

日本体育大学 スポーツキュアセンター

---

## バージョン履歴

### ver 3.0 (2024-12-31)
- プロンプト本文直接入力機能を追加
- 文字数からトークン数への自動計算機能を追加
- 各実習で個別の履修者数設定に対応
- 予備費設定を削除
- モデル選択をgpt-5.2とgpt-5-miniに限定
- CSV出力機能を強化
